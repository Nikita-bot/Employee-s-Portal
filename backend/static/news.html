<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–æ—Å—Ç–∏ | –ì–æ—Ä–æ–¥—Å–∫–∞—è –ë–æ–ª—å–Ω–∏—Ü–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/app/static/css/news.css" type="text/css">
    <script src="/app/static/js/auth.js"></script>
</head>
<body>
    <div class="wrapper">
        <header>
            <div class="logo">–ì–æ—Ä–æ–¥—Å–∫–∞—è –ë–æ–ª—å–Ω–∏—Ü–∞</div>
            <div class="user-menu" onclick="toggleDropdown()">
                <span>–ò–≤–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á</span>
                <img src="https://i.imgur.com/3QZ9a7s.png" alt="–ê–≤–∞—Ç–∞—Ä">
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="/profile" class="dropdown-item">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
                    <button class="dropdown-item" onclick="showChangePasswordModal()">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    <button class="dropdown-item" onclick="showTelegramModal()">–ü—Ä–∏–≤—è–∑–∞—Ç—å –¢–µ–ª–µ–≥—Ä–∞–º–º</button>
                    <div class="dropdown-divider"></div>
                    <button class="dropdown-item" onclick="logout()">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </header>

        <div class="main-container">
            <sidebar>
                <ul class="nav-links">
                    <li><a href="/">
                        <i class="fas fa-home"></i>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </a></li>
                    <li><a href="/tasks">
                        <i class="fas fa-tasks"></i>
                        <span>–ó–∞–¥–∞—á–∏</span>
                    </a></li>
                    <li><a href="#">
                        <i class="fas fa-file-alt"></i>
                        <span>–≠–î–û</span>
                    </a></li>
                    <li><a href="http://documents.kkbsmp.ru/view/list">
                        <i class="fas fa-book"></i>
                        <span>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</span>
                    </a></li>
                    <li><a href="https://portals.kkbsmp.ru/">
                        <i class="fas fa-external-link-alt"></i>
                        <span>–ü–æ—Ä—Ç–∞–ª—ã</span>
                    </a></li>
                    <li><a href="/news" class="active">
                        <i class="fas fa-newspaper"></i>
                        <span>–ù–æ–≤–æ—Å—Ç–∏</span>
                    </a></li>
                    <li><a href="/support">
                        <i class="fas fa-headset"></i>
                        <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                    </a></li>
                </ul>
            </sidebar>

            <main class="content-area">
                <div class="page-header">
                    <h1>–ù–æ–≤–æ—Å—Ç–∏ –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h1>
                </div>

                <div class="news-controls">
                    <button class="btn btn-primary" onclick="showCreateNewsModal()">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
                    <input type="text" class="search-box" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º..." onkeyup="searchNews(this.value)">
                    <select class="filter-select" onchange="filterNewsByType(this.value)">
                        <option value="all">–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</option>
                        <option value="announcement">–û–±—ä—è–≤–ª–µ–Ω–∏—è</option>
                        <option value="event">–°–æ–±—ã—Ç–∏—è</option>
                        <option value="medical">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ</option>
                        <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ</option>
                    </select>
                    <select class="filter-select" onchange="filterNewsByDate(this.value)">
                        <option value="all">–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</option>
                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                        <option value="month">–ó–∞ –º–µ—Å—è—Ü</option>
                    </select>
                </div>

                <div class="news-grid" id="newsGrid">
                    <!-- –ù–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>

                <div class="pagination">
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <button class="page-btn">‚Üí</button>
                </div>
            </main>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ -->
        <div class="modal" id="createNewsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
                    <button class="close-btn" onclick="closeCreateNewsModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="newsTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏</label>
                        <input type="text" id="newsTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫">
                    </div>
                    <div class="form-group">
                        <label for="newsCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="newsCategory">
                            <option value="announcement">–û–±—ä—è–≤–ª–µ–Ω–∏–µ</option>
                            <option value="event">–°–æ–±—ã—Ç–∏–µ</option>
                            <option value="medical">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è</option>
                            <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newsContent">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</label>
                        <textarea id="newsContent" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" onclick="closeCreateNewsModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="createNewNews()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–æ–≤–æ—Å—Ç–∏ -->
        <div class="modal" id="newsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalNewsTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏</h2>
                    <button class="close-btn" onclick="closeNewsModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="full-news-meta">
                        <span id="modalNewsDate">–î–∞—Ç–∞</span>
                        <span id="modalNewsCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                        <span id="modalNewsAuthor">–ê–≤—Ç–æ—Ä</span>
                    </div>
                    <div class="full-news-content" id="modalNewsContent">
                        <!-- –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ -->
                    </div>
                    <div class="news-attachments" id="modalNewsAttachments">
                        <!-- –í–ª–æ–∂–µ–Ω–∏—è -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–≤—è–∑–∫–∏ Telegram -->
        <div class="modal" id="telegramModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>
                        –ü—Ä–∏–≤—è–∑–∫–∞ Telegram
                    </h2>
                    <button class="close-btn" onclick="closeTelegramModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="instructions">
                        <h3>–ö–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å Telegram:</h3>
                        
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-text">
                                –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ <strong>@HospitalPortalBot</strong>
                            </div>
                        </div>
                        
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-text">
                                –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É <code>/start</code> –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
                            </div>
                        </div>
                        
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-text">
                                –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –æ—Ç–ø—Ä–∞–≤–∏–ª –±–æ—Ç
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="verificationCode">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</label>
                        <input type="text" id="verificationCode" class="code-input" placeholder="ABC123" maxlength="6" oninput="validateVerificationCode()">
                        <div class="error-message" id="codeError">–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</div>
                        <div class="success-message" id="codeSuccess">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!</div>
                    </div>

                    <div class="connection-info hidden" id="connectionInfo">
                        <img src="https://i.imgur.com/3QZ9a7s.png" alt="–ê–≤–∞—Ç–∞—Ä Telegram" class="user-avatar">
                        <div class="user-details">
                            <h4>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≤–∞–Ω–æ–≤</h4>
                            <p>@alex_ivanov ‚Ä¢ –ü—Ä–∏–≤—è–∑–∞–Ω 5 –º–∏–Ω –Ω–∞–∑–∞–¥</p>
                        </div>
                    </div>

                    <div class="status-connected" id="statusConnected">
                        ‚úÖ Telegram —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö –∏ –Ω–æ–≤–æ—Å—Ç—è—Ö.
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" onclick="closeTelegramModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" id="connectBtn" onclick="connectTelegram()" disabled>–ü—Ä–∏–≤—è–∑–∞—Ç—å</button>
                    <button class="btn btn-danger hidden" id="disconnectBtn" onclick="disconnectTelegram()">–û—Ç–≤—è–∑–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
        <div class="modal" id="changePasswordModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h2>
                    <button class="close-btn" onclick="closeChangePasswordModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">

                        <div class="form-group">
                            <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <div class="password-toggle">
                                <input type="password" id="newPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" oninput="validatePassword()">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('newPassword')">üëÅÔ∏è</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                            <div class="password-toggle">
                                <input type="password" id="confirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" oninput="validatePassword()">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirmPassword')">üëÅÔ∏è</button>
                            </div>
                            <div class="error-message" id="confirmPasswordError">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</div>
                        </div>

                        <div class="success-message" id="passwordSuccess">–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!</div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" onclick="closeChangePasswordModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" id="savePasswordBtn" onclick="changePassword()" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2023 –ì–æ—Ä–æ–¥—Å–∫–∞—è –ë–æ–ª—å–Ω–∏—Ü–∞. –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞. –í–µ—Ä—Å–∏—è 2.1</p>
        </footer>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–µ–π
        let newsData = [
            {
                id: 1,
                title: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞",
                preview: "–° 15 –æ–∫—Ç—è–±—Ä—è –≤–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...",
                content: `<p>–° 15 –æ–∫—Ç—è–±—Ä—è 2023 –≥–æ–¥–∞ –≤ –Ω–∞—à–µ–π –±–æ–ª—å–Ω–∏—Ü–µ –≤–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É—Å–∏–ª–µ–Ω–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏.</p>
                         <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</h3>
                         <p>–í—Å–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è. –í–Ω–µ–¥—Ä—è–µ—Ç—Å—è –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –æ—Å–æ–±–æ –≤–∞–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.</p>
                         <h3>–û–±—É—á–µ–Ω–∏–µ:</h3>
                         <p>–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –æ–±—É—á–∞—é—â–∏–µ —Å–µ–º–∏–Ω–∞—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø—Ä–æ–π–¥—É—Ç —Å 10 –ø–æ 12 –æ–∫—Ç—è–±—Ä—è –≤ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª–µ –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞.</p>`,
                date: "05.10.2023",
                category: "announcement",
                author: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è",
                important: true,
                attachments: [
                    { name: "–ù–æ–≤—ã–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç.pdf", type: "pdf" },
                    { name: "–ì—Ä–∞—Ñ–∏–∫ –æ–±—É—á–µ–Ω–∏—è.xlsx", type: "excel" }
                ]
            },
            {
                id: 2,
                title: "–ü–ª–∞–Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã 15 –æ–∫—Ç—è–±—Ä—è",
                preview: "15 –æ–∫—Ç—è–±—Ä—è —Å 22:00 –¥–æ 02:00 –±—É–¥—É—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã...",
                content: `<p>–£–≤–∞–∂–∞–µ–º—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏! –°–æ–æ–±—â–∞–µ–º –≤–∞–º –æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏ –ø–ª–∞–Ω–æ–≤—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç.</p>
                         <p><strong>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong> 15 –æ–∫—Ç—è–±—Ä—è 2023 –≥–æ–¥–∞ —Å 22:00 –¥–æ 02:00</p>
                         <p><strong>–ß—Ç–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ:</strong></p>
                         <ul>
                             <li>–°–∏—Å—Ç–µ–º–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞</li>
                             <li>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</li>
                             <li>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                         </ul>
                         <p>–í —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –∏ —Å–º–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –±—É–¥—É—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É accordingly.</p>`,
                date: "03.10.2023",
                category: "technical",
                author: "IT-–æ—Ç–¥–µ–ª",
                important: true,
                attachments: []
            },
            {
                id: 3,
                title: "–°–µ–º–∏–Ω–∞—Ä –ø–æ –Ω–æ–≤—ã–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –≤ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏–∏",
                preview: "–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤—Å–µ—Ö –≤—Ä–∞—á–µ–π-–∫–∞—Ä–¥–∏–æ–ª–æ–≥–æ–≤ –Ω–∞ —Å–µ–º–∏–Ω–∞—Ä 12 –æ–∫—Ç—è–±—Ä—è –≤ 14:00...",
                content: `<p>–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤—Å–µ—Ö –≤—Ä–∞—á–µ–π-–∫–∞—Ä–¥–∏–æ–ª–æ–≥–æ–≤ –∏ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –Ω–∞ –Ω–∞—É—á–Ω–æ-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–µ–º–∏–Ω–∞—Ä.</p>
                         <p><strong>–¢–µ–º–∞:</strong> "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ –ª–µ—á–µ–Ω–∏—é —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π"</p>
                         <p><strong>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong> 12 –æ–∫—Ç—è–±—Ä—è 2023 –≥–æ–¥–∞, 14:00</p>
                         <p><strong>–ú–µ—Å—Ç–æ:</strong> –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞</p>
                         <p><strong>–°–ø–∏–∫–µ—Ä—ã:</strong></p>
                         <ul>
                             <li>–ü—Ä–æ—Ñ. –ò–≤–∞–Ω–æ–≤ –ê.–°. - "–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ –∫–∞—Ä–¥–∏–æ—Ö–∏—Ä—É—Ä–≥–∏–∏"</li>
                             <li>–î–æ—Ü. –ü–µ—Ç—Ä–æ–≤–∞ –ú.–ò. - "–ù–æ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–∑–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏"</li>
                             <li>–ö.–º.–Ω. –°–∏–¥–æ—Ä–æ–≤ –í.–ü. - "–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤"</li>
                         </ul>`,
                date: "01.10.2023",
                category: "medical",
                author: "–ù–∞—É—á–Ω—ã–π –æ—Ç–¥–µ–ª",
                important: false,
                attachments: [
                    { name: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–µ–º–∏–Ω–∞—Ä–∞.pdf", type: "pdf" }
                ]
            }
        ];

        let currentFilter = 'all';

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è dropdown –º–µ–Ω—é
        function toggleDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.classList.toggle('show');
        }

        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('dropdownMenu');
            const userMenu = document.querySelector('.user-menu');
            
            if (!userMenu.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            renderNews();
        });

        // –†–µ–Ω–¥–µ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π
        function renderNews() {
            const newsGrid = document.getElementById('newsGrid');
            const filteredNews = filterNews(newsData);
            
            newsGrid.innerHTML = '';
            
            filteredNews.forEach(news => {
                const newsElement = createNewsElement(news);
                newsGrid.appendChild(newsElement);
            });
        }

        function filterNews(newsList) {
            let filtered = newsList;
            
            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É
            if (currentFilter !== 'all') {
                filtered = filtered.filter(news => news.category === currentFilter);
            }
            
            return filtered;
        }

        function createNewsElement(news) {
            const newsDiv = document.createElement('div');
            newsDiv.className = `news-card ${news.important ? 'featured' : ''}`;
            
            const categoryText = {
                'announcement': '–û–±—ä—è–≤–ª–µ–Ω–∏–µ',
                'event': '–°–æ–±—ã—Ç–∏–µ', 
                'medical': '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ',
                'technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ'
            };

            const categoryClass = {
                'announcement': 'category-announcement',
                'event': 'category-event',
                'medical': 'category-medical', 
                'technical': 'category-technical'
            };

            newsDiv.innerHTML = `
                <div class="news-card-header">
                    <div class="news-meta">
                        <span class="news-date">${news.date}</span>
                        <span class="news-category ${categoryClass[news.category]}">${categoryText[news.category]}</span>
                    </div>
                    <div class="news-title">${news.title}</div>
                    <div class="news-preview">${news.preview}</div>
                </div>
                <div class="news-card-body">
                    <div class="news-content">${news.content.substring(0, 150)}...</div>
                    ${news.attachments.length > 0 ? `
                        <div class="news-attachments">
                            ${news.attachments.map(att => 
                                `<a href="#" class="attachment">üìé ${att.name}</a>`
                            ).join('')}
                        </div>
                    ` : ''}
                </div>
                <div class="news-card-footer">
                    <span class="news-author">–ê–≤—Ç–æ—Ä: ${news.author}</span>
                    <span class="read-more" onclick="openNewsModal(${news.id})">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</span>
                </div>
            `;
            
            return newsDiv;
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
        function filterNewsByType(type) {
            currentFilter = type;
            renderNews();
        }

        function filterNewsByDate(range) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ
            console.log('–§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ:', range);
            renderNews();
        }

        function searchNews(query) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –ø–æ–∏—Å–∫
            console.log('–ü–æ–∏—Å–∫:', query);
            if (query) {
                const filtered = newsData.filter(news => 
                    news.title.toLowerCase().includes(query.toLowerCase()) ||
                    news.content.toLowerCase().includes(query.toLowerCase())
                );
                renderFilteredNews(filtered);
            } else {
                renderNews();
            }
        }

        function renderFilteredNews(filteredNews) {
            const newsGrid = document.getElementById('newsGrid');
            newsGrid.innerHTML = '';
            
            filteredNews.forEach(news => {
                const newsElement = createNewsElement(news);
                newsGrid.appendChild(newsElement);
            });
        }

        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function showCreateNewsModal() {
            document.getElementById('createNewsModal').classList.add('show');
        }

        function closeCreateNewsModal() {
            document.getElementById('createNewsModal').classList.remove('show');
            // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
            document.getElementById('newsTitle').value = '';
            document.getElementById('newsContent').value = '';
        }

        function createNewNews() {
            const title = document.getElementById('newsTitle').value;
            const content = document.getElementById('newsContent').value;
            const category = document.getElementById('newsCategory').value;
            
            if (title && content) {
                const newNews = {
                    id: newsData.length + 1,
                    title: title,
                    preview: content.substring(0, 100) + '...',
                    content: content,
                    date: new Date().toLocaleDateString('ru-RU'),
                    category: category,
                    author: '–ò–≤–∞–Ω–æ–≤ –ê.–°.',
                    important: important,
                    attachments: []
                };
                
                newsData.unshift(newNews); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
                closeCreateNewsModal();
                renderNews();
            } else {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏');
            }
        }

        function openNewsModal(newsId) {
            const news = newsData.find(n => n.id === newsId);
            
            if (news) {
                document.getElementById('modalNewsTitle').textContent = news.title;
                document.getElementById('modalNewsDate').textContent = news.date;
                document.getElementById('modalNewsCategory').textContent = getCategoryText(news.category);
                document.getElementById('modalNewsAuthor').textContent = `–ê–≤—Ç–æ—Ä: ${news.author}`;
                document.getElementById('modalNewsContent').innerHTML = news.content;
                
                const attachmentsContainer = document.getElementById('modalNewsAttachments');
                if (news.attachments.length > 0) {
                    attachmentsContainer.innerHTML = `
                        <h3>–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</h3>
                        ${news.attachments.map(att => 
                            `<a href="#" class="attachment">üìé ${att.name}</a>`
                        ).join('')}
                    `;
                } else {
                    attachmentsContainer.innerHTML = '';
                }
                
                document.getElementById('newsModal').classList.add('show');
            }
        }

        function closeNewsModal() {
            document.getElementById('newsModal').classList.remove('show');
        }

        function getCategoryText(category) {
            const texts = {
                'announcement': '–û–±—ä—è–≤–ª–µ–Ω–∏–µ',
                'event': '–°–æ–±—ã—Ç–∏–µ',
                'medical': '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ',
                'technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ'
            };
            return texts[category];
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ Telegram
        function showTelegramModal() {
            document.getElementById('telegramModal').classList.add('show');
            document.getElementById('dropdownMenu').classList.remove('show');
            resetTelegramForm();
        }

        function closeTelegramModal() {
            document.getElementById('telegramModal').classList.remove('show');
        }

        function resetTelegramForm() {
            document.getElementById('verificationCode').value = '';
            document.getElementById('codeError').style.display = 'none';
            document.getElementById('codeSuccess').style.display = 'none';
            document.getElementById('connectBtn').disabled = true;
            document.getElementById('statusConnected').classList.remove('show');
            document.getElementById('connectionInfo').classList.add('hidden');
            document.getElementById('disconnectBtn').classList.add('hidden');
            document.getElementById('connectBtn').classList.remove('hidden');
        }

        function validateVerificationCode() {
            const code = document.getElementById('verificationCode').value.toUpperCase();
            const connectBtn = document.getElementById('connectBtn');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–¥–∞ (6 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)
            const isValid = /^[A-Z0-9]{6}$/.test(code);
            
            connectBtn.disabled = !isValid;
            
            if (code.length === 6 && !isValid) {
                document.getElementById('codeError').style.display = 'block';
                document.getElementById('codeSuccess').style.display = 'none';
            } else if (isValid) {
                document.getElementById('codeError').style.display = 'none';
                document.getElementById('codeSuccess').style.display = 'block';
            } else {
                document.getElementById('codeError').style.display = 'none';
                document.getElementById('codeSuccess').style.display = 'none';
            }
        }

        function connectTelegram() {
            const code = document.getElementById('verificationCode').value.toUpperCase();
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã AJAX –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            console.log('–ü—Ä–∏–≤—è–∑–∫–∞ Telegram —Å –∫–æ–¥–æ–º:', code);
            
            // –î–µ–º–æ-–ª–æ–≥–∏–∫–∞ –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
            if (code === 'ABC123') {
                // –£—Å–ø–µ—à–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞
                document.getElementById('statusConnected').classList.add('show');
                document.getElementById('connectionInfo').classList.remove('hidden');
                document.getElementById('connectBtn').classList.add('hidden');
                document.getElementById('disconnectBtn').classList.remove('hidden');
                
                // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                document.getElementById('verificationCode').disabled = true;
            } else {
                // –û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏
                document.getElementById('codeError').style.display = 'block';
                document.getElementById('codeError').textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è';
            }
        }

        function disconnectTelegram() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã AJAX –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            console.log('–û—Ç–≤—è–∑–∫–∞ Telegram');
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            resetTelegramForm();
            document.getElementById('verificationCode').disabled = false;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–≤—è–∑–∫–µ
            alert('Telegram —É—Å–ø–µ—à–Ω–æ –æ—Ç–≤—è–∑–∞–Ω –æ—Ç –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
        function showChangePasswordModal() {
            document.getElementById('changePasswordModal').classList.add('show');
            document.getElementById('dropdownMenu').classList.remove('show');
        }

        function closeChangePasswordModal() {
            document.getElementById('changePasswordModal').classList.remove('show');
            resetPasswordForm();
        }

        function resetPasswordForm() {
            document.getElementById('changePasswordForm').reset();
            document.getElementById('confirmPasswordError').style.display = 'none';
            document.getElementById('passwordSuccess').style.display = 'none';
            document.getElementById('savePasswordBtn').disabled = true;
        }

        function togglePasswordVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            const button = field.parentNode.querySelector('.toggle-password');
            
            if (field.type === 'password') {
                field.type = 'text';
                button.textContent = 'üîí';
            } else {
                field.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        function changePassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã AJAX –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            console.log('–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è:', {
                newPassword: newPassword,
                confirmPassword: confirmPassword
            });
            
            document.getElementById('passwordSuccess').style.display = 'block';
            document.getElementById('savePasswordBtn').disabled = true;
                
            setTimeout(() => {
                closeChangePasswordModal();
            }, 2000);
        }

        function validatePassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const saveBtn = document.getElementById('savePasswordBtn');
            const passwordsMatch = newPassword === confirmPassword && newPassword !== '';

            // –ü–æ–∫–∞–∑ –æ—à–∏–±–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
            document.getElementById('confirmPasswordError').style.display = 
                confirmPassword && !passwordsMatch ? 'block' : 'none';
            
            saveBtn.disabled = !(passwordsMatch);
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
        document.addEventListener('click', function(event) {
            const telegramModal = document.getElementById('telegramModal');
            const passwordModal = document.getElementById('changePasswordModal');
            
            if (event.target === telegramModal) {
                closeTelegramModal();
            }
            if (event.target === passwordModal) {
                closeChangePasswordModal();
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ —Ñ–æ—Ä–º–µ
        document.addEventListener('keypress', function(event) {
            if (event.key === 'Enter' && document.getElementById('telegramModal').classList.contains('show')) {
                const connectBtn = document.getElementById('connectBtn');
                if (!connectBtn.disabled) {
                    connectTelegram();
                }
            }
        });
    </script>
</body>
</html>